{"version":3,"sources":["Favorites.es6"],"names":[],"mappings":"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","file":"Favorites.js","sourcesContent":["function BaxiFavorites() {\r\n\tlet BF = this;\r\n\tBF.items = [];\r\n\tBF.template = document.createElement('LI');\r\n\tBF.settings = {\r\n\t\tmaxItems: 5\r\n\t};\r\n\r\n\tBF.add = function ( uid = 0, stationName = null ) {\r\n\t\tlet result = false;\r\n\t\tjQuery.ajax({\r\n\t\t\turl: baxiSearchSettings.ajaxUrl.favorites, //'/?tx_c3baxi_baxisuche[action]=stationDetail&tx_c3baxi_baxisuche[controller]=Ajax&type=666',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\ttx_c3baxi_baxisuche: {doAction: 'add', uid: uid, name: stationName}\r\n\t\t\t}\r\n\t\t}).then(function ( response ) {\r\n\t\t\tif ( response.status === 'added' ) {\r\n\t\t\t\tBF.items.push({\r\n\t\t\t\t\tstation: uid,\r\n\t\t\t\t\tname: stationName\r\n\t\t\t\t});\r\n\t\t\t\tStore.set('favorites', BF.items);\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tBF.remove = function ( uid = 0 ) {\r\n\t\tlet result = false;\r\n\t\tjQuery.ajax({\r\n\t\t\turl: baxiSearchSettings.ajaxUrl.favorites, //'/?tx_c3baxi_baxisuche[action]=stationDetail&tx_c3baxi_baxisuche[controller]=Ajax&type=666',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\ttx_c3baxi_baxisuche: {doAction: 'remove', uid: uid}\r\n\t\t\t}\r\n\t\t}).then(function ( response ) {\r\n\t\t\tBF.items = BF.items.filter(( item ) => item.station !== uid).values();\r\n\t\t\tStore.set('favorites', BF.items);\r\n\t\t\tresult = true;\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t};\r\n\t/**\r\n\t *\r\n\t * @param {Integer} uid\r\n\t */\r\n\tBF.contains = function ( uid = 0 ) {\r\n\t\treturn BF.items.filter(( item ) => parseInt(item.station) === parseInt(uid)).length;\r\n\t};\r\n\r\n\tBF.init = function () {\r\n\t\tif ( Store ) {\r\n\t\t\tlet storedFavorites = Store.get('favorites');\r\n\r\n\t\t\tif ( typeof storedFavorites === 'string' ) {\r\n\t\t\t\tBF.items = JSON.parse(storedFavorites) || [];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tBF.items = storedFavorites;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t *\r\n\t * @param {HTMLElement} parent\r\n\t * @param {HTMLElement} template\r\n\t */\r\n\tBF.appendTo = function ( parent = false, template = BF.template ) {\r\n\t\tif ( !parent ) return false;\r\n\t\tlet list = document.createDocumentFragment();\r\n\r\n\t\tfor ( let i = 0; i < BF.items.length; i++ ) {\r\n\t\t\tlet child = template.cloneNode( true );\r\n\t\t\tchild.innerHTML = child.innerHTML + BF.items[ i ].name;\r\n\t\t\tchild.setAttribute('data-key', BF.items[ i ].station);\r\n\t\t\tchild.setAttribute('data-name', BF.items[ i ].name);\r\n\t\t\tlist.append(child);\r\n\t\t}\r\n\t\tparent.append(list);\r\n\t};\r\n\r\n\tBF.init();\r\n}"]}