{"version":3,"sources":["C3DragAndDrop.es6"],"names":[],"mappings":"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","file":"C3DragAndDrop.js","sourcesContent":["requirejs([ 'jquery', 'jquery-ui/draggable', 'jquery-ui/droppable', 'jquery-ui/sortable' ], function ( jQuery ) {\r\n\r\n\t$(function() {\r\n\tjQuery('[data-toggle=\"filter\"]').on('input', function ( evt ) {\r\n\t\tlet s = evt.currentTarget.value,\r\n\t\t\ttarget = jQuery(evt.currentTarget.dataset.target),\r\n\t\t\titems = [];\r\n\r\n\t\tif ( target.length === 0 ) return;\r\n\r\n\t\tif ( target.prop('tagName') === 'SELECT' ) { // SelectBox\r\n\t\t\titems = target.find('option');\r\n\t\t}\r\n\t\telse {\r\n\t\t\titems = target.find('li');\r\n\t\t}\r\n\r\n\t\titems.show(); // show all\r\n\t\t// min length 3\r\n\t\tif ( s < 3 ) return;\r\n\r\n\t\titems.map(function () {\r\n\t\t\tvar txt = jQuery(this).text();\r\n\t\t\tif ( false === txt.toLowerCase().includes(s.toLowerCase()) ) jQuery(this).hide();\r\n\t\t});\r\n\t});\r\n\r\n\r\n\tfunction dragClone( evt ) {\r\n\t\t// console.log(evt);\r\n\t\tlet clone = jQuery(evt.currentTarget).clone(true);\r\n\t\tclone.appendTo('body');\r\n\t\treturn clone;\r\n\t}\r\n\r\n\tvar ajaxTarget = jQuery('form').data('ajax');\r\n\r\n\r\n\r\n\tjQuery('[data-draggable=\"true\"]').draggable({revert: \"invalid\", helper: dragClone});\r\n\tjQuery('[data-droppable=\"true\"]').droppable({\r\n\t\tdrop: ( evt, ui ) => {\r\n\t\t\tlet dropArea = jQuery(evt.target),\r\n\t\t\t\titem = jQuery(ui.draggable[ 0 ]),\r\n\t\t\t\tpid = dropArea.data('uid');\r\n\r\n\t\t\t//\r\n\r\n\t\t\tlet i = 0;\r\n\t\t\tif( dropArea.attr('id') !== 'freie_zonen') {\r\n\t\t\t\tdropArea.children('.list-item').each(function () {\r\n\t\t\t\t\tif ( jQuery(this).offset().top >= ui.offset.top ) {\r\n\t\t\t\t\t\ti = 1;\r\n\t\t\t\t\t\titem.insertBefore(jQuery(this));\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif( i !== 1) {\r\n\t\t\t\titem.appendTo(dropArea);\r\n\t\t\t}\r\n\r\n\t\t\titem.draggable({revert: \"invalid\", helper: dragClone});\r\n\t\t\t// \tstellenId = ui.draggable[ 0 ].dataset.id;\r\n\r\n\t\t\tif ( pid !== '' ) {\r\n\t\t\t\tjQuery.ajax(\r\n\t\t\t\t\tTYPO3.settings.ajaxUrls[ ajaxTarget ],\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t'tx_c3baxi_baxisuche': {\r\n\t\t\t\t\t\t\t\tparentUid: pid,\r\n\t\t\t\t\t\t\t\tchildUid: item.data('uid')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// 'type': 666\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\t\tcomplete: function ( result ) {\r\n\t\t\t\t\t\t\tconsole.log( result );\r\n\t\t\t\t\t\t\tif( result.status === 200) {\r\n\t\t\t\t\t\t\t\tif( result.responseJSON.success === true ) {\r\n\r\n\t\t\t\t\t\t\t\t\tif( dropArea.data('field') !== undefined ) {\r\n\t\t\t\t\t\t\t\t\t\tlet list = [];\r\n\t\t\t\t\t\t\t\t\t\tdropArea.children('.list-item').each(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tlist.push( jQuery(this).data('uid') );\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\tjQuery('[name=\"'+dropArea.data('field')+'\"]').val( list.join(',') );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet list = jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[liste]\"]');\r\n\t\t\t\tlist.val(list.val() + ',' + item.data('uid'));\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t});\r\n});\r\n"]}