{"version":3,"sources":["C3DragAndDrop.es6"],"names":[],"mappings":"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","file":"C3DragAndDrop.js","sourcesContent":["requirejs([ 'jquery', 'jquery-ui/draggable', 'jquery-ui/droppable', 'jquery-ui/sortable' ], function ( jQuery ) {\r\n\r\n\tjQuery('[data-toggle=\"filter\"]').on('input', function ( evt ) {\r\n\t\tlet s = evt.currentTarget.value,\r\n\t\t\ttarget = jQuery(evt.currentTarget.dataset.target),\r\n\t\t\titems = [];\r\n\r\n\t\tif ( target.length === 0 ) return;\r\n\r\n\t\tif ( target.prop('tagName') === 'SELECT' ) { // SelectBox\r\n\t\t\titems = target.find('option');\r\n\t\t}\r\n\t\telse {\r\n\t\t\titems = target.find('li');\r\n\t\t}\r\n\r\n\t\titems.show(); // show all\r\n\t\t// min length 3\r\n\t\tif ( s < 3 ) return;\r\n\r\n\t\titems.map(function () {\r\n\t\t\tvar txt = jQuery(this).text();\r\n\t\t\tif ( false === txt.toLowerCase().includes(s.toLowerCase()) ) jQuery(this).hide();\r\n\t\t});\r\n\t});\r\n\r\n\r\n\tfunction dragClone( evt ) {\r\n\t\t// console.log(evt);\r\n\t\tlet clone = jQuery(evt.currentTarget).clone(true);\r\n\t\tclone.appendTo('body');\r\n\t\treturn clone;\r\n\t}\r\n\r\n\tvar ajaxTarget = jQuery('form').data('ajax');\r\n\tconsole.log(ajaxTarget);\r\n\r\n\tjQuery('[data-draggable=\"true\"]').draggable({revert: \"invalid\", helper: dragClone});\r\n\tjQuery('[data-droppable=\"true\"]').droppable({\r\n\t\tdrop: ( evt, ui ) => {\r\n\t\t\tlet dropArea = jQuery(evt.target),\r\n\t\t\t\titem = jQuery(ui.draggable[ 0 ]);\r\n\r\n\t\t\t// if( jQuery( evt.originalEvent.target ).hasClass('list-item') ) {\r\n\t\t\t// \titem.insertBefore( evt.originalEvent.target );\r\n\t\t\t// }\r\n\t\t\t// else {\r\n\t\t\titem.appendTo(dropArea);\r\n\t\t\t// }\r\n\t\t\titem.draggable({revert: \"invalid\", helper: dragClone});\r\n\r\n\r\n\t\t\tvar pid = dropArea.data('uid');\r\n\t\t\t// \tstellenId = ui.draggable[ 0 ].dataset.id;\r\n\r\n\t\t\tif ( pid != '' ) {\r\n\t\t\t\tjQuery.ajax(\r\n\t\t\t\t\tTYPO3.settings.ajaxUrls[ ajaxTarget ],\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t'tx_c3baxi_baxisuche': {\r\n\t\t\t\t\t\t\t\tparentUid: pid,\r\n\t\t\t\t\t\t\t\tchildUid: item.data('uid')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// 'type': 666\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\t\tcomplete: function ( result ) {\r\n\t\t\t\t\t\t\tconsole.log(result);\r\n\t\t\t\t\t\t\t// window.location.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet list = jQuery('[name=\"tx_c3baxi_web_c3baxibaxi[liste]\"]');\r\n\t\t\t\tlist.val(list.val() + ',' + item.data('uid'));\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n"]}