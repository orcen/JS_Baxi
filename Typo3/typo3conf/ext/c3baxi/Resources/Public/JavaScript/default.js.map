{"version":3,"sources":["default.es6"],"names":[],"mappings":"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","file":"default.js","sourcesContent":["'use strict';\r\n/**\r\n ****     Definitions and Customization */\r\n\r\n/**\r\n *\r\n * @param obj\r\n * @param predicate\r\n * @returns {*}\r\n */\r\nObject.filter = ( obj, predicate ) =>\r\n    Object.keys(obj)\r\n          .filter(key => predicate(obj[ key ], key))\r\n          .reduce(( res, key ) => (res[ key ] = obj[ key ], res), {});\r\n\r\nlet dialogDefaults = Object.freeze({\r\n    classes: {\r\n        \"ui-dialog\": \"boxed\",\r\n        \"ui-dialog-titlebar\": \"hidden\",\r\n        \"ui-dialog-content\": \"box\"\r\n    },\r\n    resizable: false,\r\n    title: null,\r\n    minHeight: 400,\r\n    height: 400,\r\n    width: () => Math.min(400, parseInt(window.innerWidth) - 40),\r\n    show: {effect: \"fade\", duration: 300},\r\n    hide: {effect: \"fade\", duration: 300},\r\n    open: function ( evt, ui ) {\r\n        let parent = jQuery(evt.target).closest(\".ui-dialog\"),\r\n            removeOverlay = false,\r\n            overlay = null;\r\n        parent.css(\"z-index\", 500);\r\n        parent.find(\".ui-dialog-titlebar\").hide();\r\n        if ( parent.siblings(\".ui-widget-overlay\").length === 0 ) {\r\n            overlay = jQuery(`<div class='ui-widget-overlay'>`).appendTo(jQuery(\"body\"));\r\n            removeOverlay = true;\r\n        }\r\n        else {\r\n            overlay = parent.siblings(\".ui-widget-overlay\");\r\n        }\r\n        parent.siblings(\".ui-widget-overlay\").css(\"z-index\", 490).addClass(\"help-overlay\");\r\n        let closeHelp = () => {\r\n            if ( removeOverlay ) {\r\n                overlay.remove();\r\n            }\r\n            else {\r\n                parent.siblings(\".ui-widget-overlay\").css(\"z-index\", 90).removeClass(\"help-overlay\");\r\n            }\r\n            jQuery(parent.find(\"[id*='Dialog']\")).dialog(\"destroy\").remove();\r\n\r\n        };\r\n        jQuery(\"[data-action='closeDialog']\", parent).on(\"click\", closeHelp);\r\n        jQuery(overlay).on(\"click\", closeHelp);\r\n    }\r\n});\r\n\r\n/** Favorites */\r\nfunction BaxiFavorites( params ) {\r\n    let BF = this,\r\n        defaults = {\r\n            maxItems: 5,\r\n            storeKey: \"favorites\"\r\n        };\r\n    BF.items = [];\r\n    BF.template = document.createElement(\"LI\");\r\n    BF.settings = Object.assign({}, defaults, params);\r\n\r\n    BF.add = function ( uid = 0, stationName = null ) {\r\n        let result = false;\r\n        jQuery.ajax({\r\n            url: baxiSearchSettings.ajaxUrl.favorites, //\"/?tx_c3baxi_baxisuche[action]=stationDetail&tx_c3baxi_baxisuche[controller]=Ajax&type=666\",\r\n            method: \"POST\",\r\n            data: {\r\n                tx_c3baxi_baxisuche: {doAction: \"add\", uid: uid, name: stationName}\r\n            }\r\n        }).then(function ( response ) {\r\n            if ( response.status === \"added\" ) {\r\n                BF.items.push({\r\n                    station: uid,\r\n                    name: stationName\r\n                });\r\n                Store.set(BF.settings.storeKey, BF.items);\r\n                result = true;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    };\r\n\r\n    BF.remove = function ( uid = 0 ) {\r\n        let result = false;\r\n        jQuery.ajax({\r\n            url: baxiSearchSettings.ajaxUrl.favorites, //\"/?tx_c3baxi_baxisuche[action]=stationDetail&tx_c3baxi_baxisuche[controller]=Ajax&type=666\",\r\n            method: \"POST\",\r\n            data: {\r\n                tx_c3baxi_baxisuche: {doAction: \"remove\", uid: uid}\r\n            }\r\n        }).then(function ( response ) {\r\n            BF.items = BF.items.filter(( item ) => item.station !== uid).values();\r\n            Store.set(BF.settings.storeKey, BF.items);\r\n            result = true;\r\n        });\r\n\r\n        return result;\r\n    };\r\n    /**\r\n     *\r\n     * @param {Integer} uid\r\n     */\r\n    BF.contains = function ( uid = 0 ) {\r\n        return BF.items.filter(( item ) => parseInt(item.station) === parseInt(uid)).length;\r\n    };\r\n\r\n    BF.init = function () {\r\n        if ( Store ) {\r\n            let storedFavorites = Store.get(BF.settings.storeKey);\r\n\r\n            if ( typeof storedFavorites === \"string\" ) {\r\n                try {\r\n                    BF.items = JSON.parse(storedFavorites);\r\n                }\r\n                catch(e) {\r\n                    BF.items = [];\r\n                }\r\n            }\r\n            else {\r\n                BF.items = storedFavorites;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param {HTMLElement} parent\r\n     * @param {HTMLElement} template\r\n     */\r\n    BF.appendTo = function ( parent = false, template = BF.template ) {\r\n        if ( !parent ) return false;\r\n        let list = document.createDocumentFragment();\r\n\r\n        for ( let i = 0; i < BF.items.length; i++ ) {\r\n            let child = template.cloneNode(true);\r\n            child.innerHTML = child.innerHTML + BF.items[ i ].name;\r\n            child.setAttribute(\"data-key\", BF.items[ i ].station);\r\n            child.setAttribute(\"data-name\", BF.items[ i ].name);\r\n            list.append(child);\r\n        }\r\n        parent.append(list);\r\n    };\r\n\r\n    BF.init();\r\n}\r\n\r\nvar Favorites = new BaxiFavorites();\r\n\r\n/** Prompt jQuery.UI */\r\njQuery.widget(\"custom.prompt\", jQuery.ui.dialog, {\r\n\r\n    options: {\r\n        modal: true,\r\n        classes: {\r\n            \"ui-dialog\": \"boxed prompt\",\r\n            \"ui-dialog-titlebar\": \"hidden\",\r\n            \"ui-dialog-content\": \"box prompt-content\",\r\n            \"ui-dialog-buttonpane\": \"prompt-buttonpanel\"\r\n        },\r\n        question: \"Test Frage\",\r\n        defaultText: \"\",\r\n        resizable: false,\r\n        buttons: {\r\n            accept: {\r\n                text: \"OK\",\r\n                class: \"prompt-btn prompt-btn--accept\",\r\n                id: \"promptAccept\",\r\n                click: () => true\r\n            },\r\n            cancel: {\r\n                text: \"Abbrechen\",\r\n                class: \"prompt-btn prompt-btn--cancel\",\r\n                id: \"promptCancel\",\r\n                click: () => true\r\n\r\n            }\r\n        },\r\n        confirm : false,\r\n        submit: function ( val ) {\r\n        }\r\n    },\r\n    submit: function ( val ) {\r\n\r\n        if ( typeof this.options.submit === \"function\" ) {\r\n            this.options.submit(val);\r\n        }\r\n        jQuery(this.parentNode).dialog().dialog(\"destroy\").remove();\r\n    },\r\n    _create: function () {\r\n        if( this.options.confirm ) {\r\n            this.options.classes['ui-dialog'] = this.options.classes['ui-dialog'].concat( ' prompt--confirm' );\r\n            this.options.classes['ui-dialog-buttonpane'] = this.options.classes['ui-dialog-buttonpane'].concat( ' is-centered' );\r\n            this.options.buttons.accept.class = this.options.buttons.accept.class.concat(' btn btn--cancel');\r\n        }\r\n        this._super();\r\n    },\r\n    open: function create() {\r\n\r\n        let html = document.createDocumentFragment();\r\n\r\n        if ( this.options.question !== \"\" ) {\r\n            let question = document.createElement(\"H2\");\r\n            question.innerText = this.options.question;\r\n            html.appendChild(question);\r\n        }\r\n\r\n        if(this.options.confirm === false ) {\r\n            /** Prompt Form */\r\n            let form = document.createElement(\"FORM\"),\r\n                field = document.createElement(\"INPUT\");\r\n\r\n\r\n            field.setAttribute(\"type\", \"text\");\r\n            field.classList.add(\"prompt-field\");\r\n            field.setAttribute(\"value\", this.options.defaultText);\r\n            form.appendChild(field);\r\n\r\n            html.appendChild(form);\r\n        }\r\n        else {\r\n            let info = document.createElement('P');\r\n            info.innerText = this.options.defaultText;\r\n            html.appendChild( info );\r\n        }\r\n\r\n        this.element.html(html);\r\n\r\n        this.uiDialogTitlebar.hide();\r\n        this.uiDialogButtonPane.appendTo(this.element);\r\n        let promptThat = this;\r\n        this.uiDialogButtonPane.find(\"#promptAccept\").on(\"click\", ( evt ) => {\r\n            let d = jQuery(evt.target).closest(\".ui-dialog\"),\r\n                f = d.find(\".prompt-field\");\r\n            promptThat.options.submit(f.val());\r\n\r\n            d.dialog().dialog(\"destroy\").remove();\r\n        });\r\n\r\n        this.uiDialogButtonPane.find(\"#promptCancel\").on(\"click\", ( evt ) => {\r\n            jQuery(evt.target).closest(\".ui-dialog\").dialog().dialog(\"destroy\").remove();\r\n        });\r\n\r\n        this._super();\r\n\r\n    }\r\n});\r\n\r\n\r\n/**\r\n ****     Actual Scripts */\r\n\r\n\r\nlet form = jQuery(\"#routeFinder\");\r\nvar ignoreZone = false;\r\n\r\njQuery(\"[data-autocomplete='haltestelle']\").on(\"click\", ( evt ) => {\r\n    let modal, isStart, callFnc, positionPickerParams;\r\n    modal = jQuery(\"<div id='mapDialog'></div>\").appendTo(\"body\");\r\n    isStart = evt.target.getAttribute(\"name\").includes(\"[start]\");\r\n    callFnc = \"haltestelle\";\r\n    positionPickerParams = {\r\n        source: baxiSearchSettings.ajaxUrl[ callFnc ],\r\n        currentPosition: baxiSearchSettings.mapCenter,\r\n        closeOnSelect: false,\r\n        customSearchButtons: function ( picker, el, callback ) {\r\n            let favoriteButtons = jQuery(`<ul class=\"favorites\">`),\r\n                tmpl = document.createElement(\"LI\");\r\n            tmpl.setAttribute(\"class\", \"favorites-item\");\r\n            tmpl.innerHTML = `<span class='btn btn--marble has-icon'><svg class='icon'><use xlink:href='#Favoriten_kontur'/></svg></span>`;\r\n            Favorites.appendTo(favoriteButtons, tmpl);\r\n            favoriteButtons.children().each(( idx, item ) => {\r\n                let fav = jQuery(item);\r\n                fav.on(\"click\", function () {\r\n                    jQuery.ajax(baxiSearchSettings.ajaxUrl.station, {\r\n                        method: \"post\",\r\n                        data: {\r\n                            tx_c3baxi_baxisuche: {uid: fav.data(\"key\")}\r\n                        }\r\n                    }).then(response => {\r\n                        response.key = response.uid;\r\n                        let evt = {\r\n                            data: response\r\n                        };\r\n                        callback(evt);\r\n                    });\r\n                });\r\n            });\r\n            return favoriteButtons;\r\n        },\r\n        customButtons: function ( picker ) {\r\n            let buttons = document.createDocumentFragment(),\r\n                favBtn = jQuery(`<span class=\"controls-btn\">`).appendTo(buttons);\r\n\r\n            favBtn.html(`<span class=\"btn btn--glass btn--round has-icon\"><svg class=\"icon\" width=\"30\" height=\"30\"><use xlink:href=\"#Favoriten_kontur\"></use></svg></span>Zu Favoriten`);\r\n\r\n            if ( !baxiSearchSettings.loggedIn ) {\r\n                favBtn.toggleClass(\"is-disabled\", true);\r\n            }\r\n            else {\r\n                if ( Favorites.contains(picker.selected.key) ) {\r\n                    favBtn.html(`<span class=\"btn btn--marble has-icon\">\r\n\t\t\t\t\t\t\t\t\t<svg class=\"icon\" width=\"24\" height=\"24\"><use xlink:href=\"#delete\"></use></svg>\r\n\t\t\t\t\t\t\t\t\t</span>von Favoriten entfernen`);\r\n                    favBtn.on(\"click\", () => {\r\n                        Favorites.remove(picker.selected.key);\r\n                    });\r\n                }\r\n                else {\r\n                    favBtn.on(\"click\", () => {\r\n                        jQuery(\"<div />\").prompt({\r\n                            question: \"Geben Sie einen eigenen Namen ein\",\r\n                            defaultText: picker.selected.title,\r\n                            submit: ( name ) => {\r\n                                Favorites.add(picker.selected.key, name);\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n            return buttons;\r\n        },\r\n        onSelect: function ( data, picker ) {\r\n            jQuery.ajax({\r\n                      url: baxiSearchSettings.ajaxUrl.station,\r\n                      method: \"POST\",\r\n                      data: {\r\n                          tx_c3baxi_baxisuche: {uid: data.key}\r\n                      }\r\n                  })\r\n                  .then(( response ) => {\r\n                      let subtitle = picker.content.find(\".subtitle\");\r\n                      subtitle.append(jQuery(\"<span>\").text(response.linie.join(\", \")));\r\n                      ignoreZone = response.zoneId;\r\n                  });\r\n        },\r\n        onSubmit: function ( data ) {\r\n            let field = jQuery(evt.target);\r\n            if ( field.prop(\"name\") === \"tx_c3baxi_baxisuche[routeShow][start]\" ) {\r\n                Store.set(\"start\", data.key);\r\n            }\r\n            else {\r\n                Store.set(\"stop\", data.key);\r\n            }\r\n            field.val(data.title);\r\n            field.nextAll(\"input[type='hidden'][name^='tx_c3baxi_baxisuche[route]']\").val(data.key);\r\n        }\r\n    };\r\n\r\n    if ( isStart && ignoreZone ) ignoreZone = false;\r\n\r\n    if ( !(\"GeoPicker\" in jQuery.fn) ) {\r\n\r\n        $(\"<link/>\", {\r\n            rel: \"stylesheet\",\r\n            type: \"text/css\",\r\n            href: window.location.origin + \"/typo3conf/ext/c3baxi/Resources/Public/JavaScript/GeoPicker.css\"\r\n        }).appendTo(\"head\");\r\n\r\n\r\n        jQuery.getScript(window.location.origin + \"/typo3conf/ext/c3baxi/Resources/Public/JavaScript/GeoPicker.js\", function () {\r\n            jQuery(modal).GeoPicker(positionPickerParams);\r\n        });\r\n    }\r\n    else {\r\n        jQuery(modal).GeoPicker(positionPickerParams);\r\n    }\r\n\r\n    var dialog = modal.dialog({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n        resizable: false,\r\n        draggable: false,\r\n        modal: false,\r\n        classes: {\r\n            \"ui-dialog\": \"is-fullscreen slide-from-right\"\r\n        },\r\n        open: function () {\r\n            let titlebar = jQuery(this).parent().find(\".ui-dialog-titlebar\"),\r\n                title = titlebar.find(\".ui-dialog-title\");\r\n\r\n            if ( title.length ) {\r\n                if ( isStart ) {\r\n                    title.html(\"Start wählen\");\r\n                }\r\n                else {\r\n                    title.html(\"Ende wählen\");\r\n                }\r\n\r\n                let helpBtn = jQuery(`<span class=\"ui-dialog-titlebar-help ui-dialog-titlebar-btn\">Hilfe \r\n\t\t\t\t\t<svg class=\"icon\" width=\"30\" height=\"30\"><use xlink:href=\"#Hilfe_Klein\"></use></svg>\r\n\t\t\t\t\t</span>`)\r\n                    .insertAfter(title)\r\n                    .on(\"click\", function ( evt ) {\r\n                        openHelp(3);\r\n                    });\r\n\r\n                // remove standard button\r\n                jQuery(this).parent().find(\".ui-dialog-titlebar-close\").remove();\r\n                let closeBtn = jQuery(\"<span class='ui-dialog-titlebar-customclose ui-dialog-titlebar-btn'>\")\r\n                    .html(\r\n                        `<svg class=\"icon\" width=\"30\" height=\"30\"><use xlink:href=\"#Pfeil_L\"></use></svg>Zurück`\r\n                    )\r\n                    .insertBefore(title)\r\n                    .on(\"click\", function ( evt ) {\r\n                        evt.preventDefault();\r\n                        // this.close(event);\r\n                        modal.dialog(\"close\");\r\n                    });\r\n            }\r\n            titlebar.append(jQuery(\"<span class='bubble'>\"));\r\n\r\n        },\r\n        close: function () {\r\n            jQuery(this).dialog(\"destroy\").remove();\r\n        }\r\n    });\r\n\r\n    jQuery(window).on(\"resize\", function () {\r\n        dialog.dialog(\"option\", \"width\", window.innerWidth);\r\n        dialog.dialog(\"option\", \"height\", window.innerHeight);\r\n    });\r\n\r\n});\r\n\r\njQuery(\"[data-autocomplete='favorites']\").on(\"click\", ( evt ) => {\r\n    let modal = jQuery(\"<div id='mapDialog'></div>\").appendTo(\"body\"),\r\n        // isStart = evt.target.getAttribute(\"name\").includes(\"[start]\"),\r\n        callFnc = \"haltestelle\",\r\n\r\n        positionPickerParams = {\r\n            source: baxiSearchSettings.ajaxUrl[ callFnc ],\r\n            currentPosition: { // default is Tirschenreuth, Germany\r\n                lat: 49.8817161,\r\n                lng: 12.3303441\r\n            },\r\n            closeOnSelect: false,\r\n            lng: {\r\n                btnConfirm: \"zu den Favoriten\"\r\n            },\r\n            onSelect: function ( data, picker ) {\r\n                jQuery.ajax({\r\n                          url: baxiSearchSettings.ajaxUrl.station, //\"/?tx_c3baxi_baxisuche[action]=stationDetail&tx_c3baxi_baxisuche[controller]=Ajax&type=666\",\r\n                          method: \"POST\",\r\n                          data: {\r\n                              tx_c3baxi_baxisuche: {uid: data.key}\r\n                          }\r\n                      })\r\n                      .then(( response ) => {\r\n                          let subtitle = picker.content.find(\".subtitle\");\r\n                          subtitle.append(jQuery(\"<span>\").text(response.linie.join(\", \")));\r\n                          // ignoreZone = response.zoneId;\r\n                      });\r\n            },\r\n            onSubmit: function ( item ) {\r\n                jQuery(\"<div />\").prompt({\r\n                    question: \"Geben Sie einen eigenen Namen ein\",\r\n                    defaultText: item.title,\r\n                    submit: ( name ) => {\r\n                        Favorites.add(item.key, name);\r\n                        let shownFavorites = jQuery(\".box.box--favorite\"),\r\n                            clone = shownFavorites.last().clone();\r\n                        clone.find(\".box-title\").text(name);\r\n                        clone.find(\".box-subtitle\").text(item.title);\r\n                        clone.find(\"[data-action='deleteFavorite']\").attr(\"data-uid\", item.key);\r\n                        clone.css(\"opacity\", 0);\r\n                        clone.insertAfter(shownFavorites.last());\r\n                        clone.animate({opacity: 1}, 300);\r\n\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n    if ( !(\"GeoPicker\" in jQuery.fn) ) {\r\n\r\n        $(\"<link/>\", {\r\n            rel: \"stylesheet\",\r\n            type: \"text/css\",\r\n            href: window.location.origin + \"/typo3conf/ext/c3baxi/Resources/Public/JavaScript/GeoPicker.css\"\r\n        }).appendTo(\"head\");\r\n\r\n\r\n        jQuery.getScript(window.location.origin + \"/typo3conf/ext/c3baxi/Resources/Public/JavaScript/GeoPicker.js\", function () {\r\n            jQuery(modal).GeoPicker(positionPickerParams);\r\n        });\r\n    }\r\n    else {\r\n        jQuery(modal).GeoPicker(positionPickerParams);\r\n    }\r\n\r\n    modal.dialog({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n        resizable: false,\r\n        draggable: false,\r\n        modal: true,\r\n        classes: {\r\n            \"ui-dialog\": \"is-fullscreen\"\r\n        },\r\n        open: function () {\r\n            let titlebar = jQuery(this).parent().find(\".ui-dialog-titlebar\"),\r\n                title = titlebar.find(\".ui-dialog-title\");\r\n\r\n\r\n            if ( title.length ) {\r\n                title.html(\"Favorit hinzufügen\");\r\n\r\n                let helpBtn = jQuery(`<span class='ui-dialog-titlebar-help ui-dialog-titlebar-btn'>Hilfe <svg class=icon width=30 height='30'><use xlink:href='Hilfe_Klein'></use></svg></span>`)\r\n                    .insertAfter(title)\r\n                    .on(\"click\", function ( evt ) {\r\n                        alert(\"help\");\r\n                    });\r\n\r\n                // remove standard button\r\n                jQuery(this).parent().find(\".ui-dialog-titlebar-close\").remove();\r\n                let closeBtn = jQuery(\"<span class='ui-dialog-titlebar-customclose ui-dialog-titlebar-btn'>\")\r\n                    .html(\r\n                        `<svg class=\"icon\" width=\"30\" height=\"30\"><use xlink:href=\"#Pfeil_L\"></use></svg>Zurück`\r\n                    )\r\n                    .insertBefore(title)\r\n                    .on(\"click\", function ( evt ) {\r\n                        evt.preventDefault();\r\n                        // this.close(event);\r\n                        modal.dialog(\"close\");\r\n                    });\r\n            }\r\n            titlebar.append(jQuery(\"<span class='bubble'>\"));\r\n\r\n        },\r\n        close: function () {\r\n            jQuery(this).dialog(\"destroy\").remove();\r\n        }\r\n    });\r\n});\r\n\r\njQuery(\"#kontoFavorites\").on(\"click\", \"[data-action='deleteFavorite']\", function ( evt ) {\r\n\r\n    if ( confirm(\"Wirklich loeschen\") ) {\r\n        let target = jQuery(this),\r\n            stationId = target.data(\"uid\");\r\n        jQuery.ajax({\r\n                  url: baxiSearchSettings.ajaxUrl.favorites, //\"/?tx_c3baxi_baxisuche[action]=stationDetail&tx_c3baxi_baxisuche[controller]=Ajax&type=666\",\r\n                  method: \"POST\",\r\n                  data: {\r\n                      tx_c3baxi_baxisuche: {\r\n                          doAction: \"remove\",\r\n                          uid: stationId\r\n                      }\r\n                  }\r\n              })\r\n              .then(function ( response ) {\r\n                  if ( response.status === \"removed\" ) {\r\n                      target.closest(\".box.box--favorite\").animate({\r\n                                opacity: 0\r\n                            }, 300)\r\n                            .slideUp(150, function () {\r\n                                jQuery(this).remove();\r\n                            });\r\n                  }\r\n              });\r\n    }\r\n\r\n});\r\nlet datepickerFields = jQuery(\"[data-picker='time']\", form);\r\nif ( form.length && datepickerFields.length ) {\r\n    jQuery.datetimepicker.setLocale(\"de\");\r\n    datepickerFields.datetimepicker({\r\n        minDate: -1,\r\n        minTime: \"04:00\",\r\n        step: 30,\r\n        format: \"d.m.Y H:i\",\r\n        dayOfWeekStart: 1,\r\n        onSelectTime: function ( currentTime, field ) {\r\n            jQuery(field).nextAll(\"input\").val(parseInt(currentTime.getTime() / 1000).toFixed(0));\r\n        }\r\n    });\r\n}\r\n\r\n/** Rating */\r\n\r\njQuery(\"[data-action='rate']\").on(\"click\", function ( evt ) {\r\n    let el = jQuery(this),\r\n        rateModal = jQuery(\"<div id='rateDialog'></div>\").appendTo(\"body\");\r\n\r\n    rateModal.hide();\r\n\r\n    let rateHTML = `\r\n<form method=\"post\" id=\"rateForm\" class=\"\">\r\n\t<input type=\"hidden\" name=\"uid\" value=\"${el.data(\"booking\")}\">\r\n\t<div>\r\n\t\t<p class=\"h4\">Feedback</p>\r\n\t\t<h3>Fahrt bewerten</h3>\r\n\t\t<div class=\"align-center\">\r\n\t\t\t<p>Warst du zufrieden mit deiner Fahrt?</p>\r\n\t\t\t<input type=\"radio\" class=\"is-hidden\" name=\"rating\" value=\"0\" id=\"ratingNo\" />\r\n\t\t\t<input type=\"radio\" class=\"is-hidden\" name=\"rating\" value=\"1\" checked id=\"ratingYes\" />\r\n\t\t\t<label for=\"ratingNo\" style=\"display: inline-block; width: 66px;\"><span class=\"btn btn--marble\"><svg class=\"icon\"><use xlink:href=\"#dislike\"></use></svg></span>Nein</label>\r\n\t\t\t<label for=\"ratingYes\" style=\"display: inline-block; width: 66px;\"><span class=\"btn btn--marble\"><svg class=\"icon\"><use xlink:href=\"#like\"></use></svg></span>Ja</label>\r\n\t\t</div>\r\n\t\t<p class=\"align-center\">\r\n\t\t\t<label>Kommentar (optional)</label><br />\r\n\t\t\t<textarea name=\"comment\" cols=\"60\" rows=\"4\" placeholder=\"Kommentar hinzufügen\"></textarea>\r\n\t\t</p>\r\n\t</div>\r\n\t<div class=\"box-footer box-footer--with-button\">\r\n\t\t<button type=\"submit\" class=\"btn btn--next\">Bewerten</button>\r\n\t</div>\r\n</form>`;\r\n    rateModal.append(rateHTML);\r\n    let ratingOpen = function ( evt, ui ) {\r\n\r\n        dialogDefaults.open(evt, ui);\r\n        let parent = jQuery(evt.target);\r\n        jQuery(\".btn\", parent).off(\"click\");\r\n        jQuery(\"#rateForm\", parent).on(\"submit\", function ( evt ) {\r\n            evt.preventDefault();\r\n\r\n            let rating = evt.target.elements.rating.value,\r\n                comment = evt.target.elements.comment.value,\r\n                id = evt.target.elements.uid.value;\r\n\r\n            rating = rating * 100; // convert to percent values\r\n\r\n            jQuery.ajax(baxiSearchSettings.ajaxUrl.rating, {\r\n                method: \"post\",\r\n                data: {\r\n                    \"tx_c3baxi_baxisuche\": {\r\n                        doAction: \"addRating\",\r\n                        rating: rating,\r\n                        comment: comment,\r\n                        id: id,\r\n                        type: \"booking\"\r\n                    }\r\n                }\r\n            }).then(( response ) => {\r\n                response = JSON.parse(response);\r\n                parent.find(\"#rateForm\").html(\"\").hide();\r\n\r\n                if ( response.status === true ) {\r\n                    let successHTML = `\r\n<div>\r\n\t<p class=\"h4\">Feedback</p>\r\n\t<h3>Danke für deine Bewertung</h3>\r\n\t<p>Deine Bewertung wurde abgesendet. Vielen Dank, dass du uns hilfst, Baxi zu verbessern.</p>\r\n\t<div class=\"box-footer box-footer--with-button\">\r\n\t\t<span class=\"btn btn--back\">Schließen</span>\r\n\t</div>\r\n</div>`;\r\n                    parent.find(\"#rateForm\").append(successHTML).show(\"slow\");\r\n                    parent.on(\"click\", \".box-footer .btn\", function () {\r\n                        jQuery(\"#rateDialog\").dialog(\"destroy\").remove();\r\n                        jQuery(\".ui-widget-overlay\").remove();\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    let dialogParams = Object.assign({}, dialogDefaults, {\r\n        open: ratingOpen,\r\n        test: true\r\n    });\r\n\r\n    rateModal.dialog(dialogParams);\r\n});\r\n\r\n\r\n/** Booking */\r\njQuery( \"[data-action='cancel']\").on('click', function(evt){\r\n    evt.preventDefault();\r\n\r\n    jQuery('<div />').prompt({\r\n        confirm: true,\r\n        question : 'Fahrt stornieren?',\r\n        defaultText : 'Wollen Sie die Bestellung wirklich stornieren?',\r\n        buttons:{\r\n            cancel:{text:'Nein, Abbrechen'}\r\n        },\r\n        submit : function ( ) {\r\n            console.log( 'confirm - true' );\r\n        }\r\n    });\r\n});\r\n\r\n\r\n\r\n/** Help Modals */\r\njQuery(\"a[href^='/hilfe?question']\").on(\"click\", function ( evt ) {\r\n    evt.preventDefault();\r\n\r\n    let link = jQuery(this),\r\n        page = \"\",\r\n        params = \"\",\r\n        qid = false;\r\n    [ page, params ] = link[ 0 ].href.split(\"?\");\r\n\r\n    params = params.split(\"&\");\r\n\r\n    for ( let i = 0; i < params.length; i++ ) {\r\n        let par = params[ i ].split(\"=\");\r\n        if ( par[ 0 ] === \"question\" ) {\r\n            qid = par[ 1 ];\r\n        }\r\n    }\r\n\r\n\r\n    if ( qid ) {\r\n        openHelp(qid);\r\n    }\r\n    return false;\r\n});\r\n\r\njQuery(\"[data-action='help']\").on(\"click\", function ( evt ) {\r\n    let qid = jQuery(this).data(\"question\");\r\n    if ( typeof qid !== \"undefined\" ) {\r\n        openHelp(qid);\r\n    }\r\n});\r\n\r\nfunction openHelp( uid = 0 ) {\r\n    let helpModal = jQuery(\"<div id='helpDialog'></div>\").appendTo(\"body\");\r\n\r\n    jQuery.ajax({\r\n        url: baxiSearchSettings.ajaxUrl.help,\r\n        method: \"POST\",\r\n        data: {\r\n            tx_c3baxi_baxisuche: {\r\n                question: uid\r\n            }\r\n        }\r\n    }).done(( response ) => {\r\n        let FAQContent = `\r\n<p class=\"box-title\">\r\n<svg class=\"icon\"><use xlink:href=\"#Hilfe_Klein\"></use></svg> Hilfe</p>\r\n<h3>${response.question}</h3><div>\r\n<p>${response.answer}</p>`;\r\n\r\n        if ( response.media ) {\r\n            if ( response.media.images.length ) {\r\n                for ( let i = 0; i < response.media.images.length; i++ )\r\n                    FAQContent += `<figure><img src='${response.media.images[ i ].url}' width='${response.media.images[ i ].size[ 0 ]}'height='${response.media.images[ i ].size[ 1 ]}' /></figure>`;\r\n            }\r\n            if ( response.media.downloads.length ) {\r\n                for ( let y = 0; y < response.media.downloads.length; y++ )\r\n                    FAQContent += \"\";\r\n            }\r\n            if ( response.media.youtube.length ) {\r\n                for ( let y = 0; y < response.media.youtube.length; y++ )\r\n                    FAQContent += `<iframe class='keep-ratio ratio-16/9' src='//www.youtube.com/embed/${response.media.youtube[ y ]}' width='800'></iframe>`;\r\n            }\r\n        }\r\n\r\n        FAQContent += `\r\n</div>\r\n<div class=\"box-footer box-footer--with-button\">\r\n\t<span class=\"btn btn--back\" data-action=\"closeDialog\">Schliessen</span>\r\n</div>\r\n<span class=\"bubble\"></span>\r\n<div id=\"helpInfo\">\r\n\t<h3>Du kommst nicht weiter?</h3><p>Ruf uns einfach an. Wir helfen dir gerne.</p>\r\n\t<p><a href=\"tel:096317929899\"><svg class=\"icon\"><use xlink:href=\"#call\"></use></svg> 0 96 31 / 79 29 899</a></p>\r\n</div>`;\r\n\r\n        // let FAQ = jQuery(FAQContent);\r\n        helpModal.html(FAQContent);\r\n        let dialogParams = Object.assign({}, dialogDefaults, {/*custom settings*/});\r\n        helpModal.dialog(dialogParams);\r\n    });\r\n}\r\n\r\n/** StepForm */\r\njQuery.fn.stepForm = function ( params ) {\r\n\r\n    if ( this.length === 0 ) return this;\r\n\r\n    // support mutltiple elements\r\n    if ( this.length > 1 ) {\r\n        this.each(function () {\r\n            $(this).stepForm(params);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    var form = {\r\n            steps: [],\r\n            stepCount: 0,\r\n            stepper: {},\r\n            active: 0,\r\n            previous: false,\r\n            innerWrap: null\r\n        },\r\n        el = this,\r\n        defaults = {\r\n            controls: true,\r\n            buttons: {\r\n                next: \".stepForm-next\",\r\n                prev: \".stepForm-prev\"\r\n            },\r\n            animation: false\r\n        },\r\n        settings = jQuery.extend({}, defaults, params);\r\n\r\n\r\n    function init() {\r\n        // get all steps\r\n        el.addClass(\"stepForm\");\r\n        form.steps = el.children();\r\n\r\n        form.stepCount = form.steps.length;\r\n\r\n        form.stepper = {};\r\n        form.active = 0;\r\n        form.first = true;\r\n        setup();\r\n\r\n    }\r\n\r\n    function setup() {\r\n        form.innerWrap = jQuery(\"<div class='stepForm-inner'></div>\");\r\n        form.innerWrap.css({\r\n            overflowX: \"hidden\",\r\n            position: \"relative\"\r\n        });\r\n\r\n        _setWrapperHeight();\r\n        jQuery(window).on('resize', _setWrapperHeight );\r\n\r\n        el.wrapInner(form.innerWrap);\r\n        form.steps.addClass(\"stepForm-step\");\r\n        // hide all except first\r\n        form.steps.hide();\r\n\r\n        if ( settings.controls === true ) {\r\n            form.stepper.el = jQuery(\"<div class='stepForm-stepper'></div>\").appendTo(el);\r\n            form.stepper.el.css({textAlign: \"center\", margin: \"16px auto 0\"});\r\n\r\n            form.stepper.steps = [];\r\n\r\n            for ( let i = 0; i < form.stepCount; i++ ) {\r\n                let step = jQuery(`<span data-idx='${i}'></span>`);\r\n                step.data(\"idx\", i)\r\n                    .css({\r\n                        display: \"inline-block\",\r\n                        height: \"10px\",\r\n                        width: \"10px\",\r\n                        borderRadius: \"100%\",\r\n                        border: \"2px solid #FFF\",\r\n                        margin: \"5px 5px\"\r\n                    });\r\n\r\n                if ( i === form.active ) {\r\n                    step.addClass(\"is-active\");\r\n                }\r\n\r\n                step.on(\"click\", function ( evt ) {\r\n                    form.previous = form.active;\r\n                    form.active = parseInt( this.dataset.idx );\r\n\r\n                    show();\r\n                });\r\n\r\n                step.appendTo(form.stepper.el);\r\n                form.stepper.steps[ i ] = step;\r\n            }\r\n        } // controls end\r\n\r\n        jQuery(settings.buttons.next).on(\"click\", next);\r\n        jQuery(settings.buttons.prev).on(\"click\", prev);\r\n\r\n        show();\r\n        form.first = false;\r\n    }\r\n\r\n    function _setWrapperHeight( evt = false ) {\r\n        let wrapHeight = 0;\r\n        form.steps.each(( idx, stepElement ) => {\r\n            wrapHeight = Math.max(wrapHeight, jQuery(stepElement).height());\r\n        });\r\n        form.innerWrap.css('height', wrapHeight + 'px');\r\n    }\r\n    function show() {\r\n        if ( !form.first ) {\r\n            /** laeuft ohne animation*/\r\n            if ( settings.animation === false ) {\r\n                form.steps.hide().toggleClass(\"is-active\", false);\r\n                jQuery(form.steps[ form.active ]).toggleClass('is-active', true).show();\r\n            }\r\n            else {\r\n                /** animation */\r\n                let prev = jQuery(form.steps[ form.previous ]),\r\n                    act = jQuery(form.steps[ form.active ]);\r\n                prev.addClass('animate-out');\r\n                act.addClass('animate-in').show();\r\n\r\n                if ( form.previous > form.active ) {\r\n                    prev.addClass('is-reverse');\r\n                    act.addClass('is-reverse');\r\n                }\r\n\r\n                prev.one('animationend', function () {\r\n                    jQuery(this).hide().removeClass('is-reverse animate-out is-active');\r\n                });\r\n                act.one('animationend', function () {\r\n                    act.removeClass('is-reverse').toggleClass('animate-in is-active');\r\n                });\r\n\r\n                // jQuery(form.steps[ form.active ]).toggleClass(\"is-active\", true).css({animation: \"slideInRight .5s linear forwards\"}).show();\r\n            }\r\n        }\r\n        else {\r\n            jQuery(form.steps[ form.active ]).toggleClass(\"is-active\", true).show();\r\n        }\r\n\r\n        setStepper();\r\n    }\r\n\r\n    function next( evt ) {\r\n        evt.preventDefault();\r\n        if ( form.active < (form.stepCount - 1) ) {\r\n            form.previous = form.active;\r\n            form.active++;\r\n\r\n            show();\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function prev( evt ) {\r\n        evt.preventDefault();\r\n        if ( form.active > 0 ) {\r\n            form.previous = form.active;\r\n            form.active--;\r\n\r\n            show();\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function setStepper() {\r\n        if ( settings.controls ) {\r\n\r\n            for ( let s = 0; s < form.stepCount; s++ ) {\r\n                form.stepper.steps[ s ].removeClass(\"is-active\");\r\n                if ( s === form.active )\r\n                    jQuery(form.stepper.steps[ s ]).addClass(\"is-active\");\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    init();\r\n\r\n    return this;\r\n\r\n};\r\njQuery(\".js-steps\").stepForm({animation: true});\r\n\r\n$(window).on(\"load\", function ( e ) {\r\n\r\n    if ( Store && typeof baxiSearchSettings === \"object\" ) {\r\n        if ( typeof baxiSearchSettings.favorites === \"string\" ) {\r\n            Store.set(\"favorites\", JSON.parse(baxiSearchSettings.favorites));\r\n        }\r\n        Store.set(\"settings\", baxiSearchSettings);\r\n    }\r\n});\r\n"]}