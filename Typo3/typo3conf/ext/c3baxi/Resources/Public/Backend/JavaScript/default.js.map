{"version":3,"sources":["default.es6"],"names":[],"mappings":"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","file":"default.js","sourcesContent":["require([ \"jquery\" ], function ( $ ) {\r\n\r\n\t$('[data-toggle=\"collapse\"][data-target]').on('click', ( evt ) => {\r\n\r\n\t\tlet target = $(evt.currentTarget).data('target');\r\n\t\tif ( target[ 0 ] === '#' ) {\r\n\t\t\t$(target).toggle();\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(target, evt.currentTarget).toggle();\r\n\t\t}\r\n\t});\r\n\r\n\t$('[data-action=\"selectStation\"]').on('change', function () {\r\n\r\n\t\tlet el = $(this),\r\n\t\t\ttarget = $(el.data('target')),\r\n\t\t\tselectedZone = el.find('[value=\"' + el.val() + '\"]').data('zone'),\r\n\t\t\tselectName = (el.data('target') === '#start_station') ? 'end' : 'start';\r\n\r\n\t\tjQuery('option', 'select[name=\"tx_c3baxi_web_c3baxibaxi[' + selectName + ']\"]')\r\n\t\t\t.attr('disabled', false)\r\n\t\t\t.filter('[data-zone=\"' + selectedZone + '\"]')\r\n\t\t\t.attr('disabled', true);\r\n\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: '/?tx_c3baxi_baxisuche[action]=stationDetail&tx_c3baxi_baxisuche[controller]=Ajax&type=666',\r\n\t\t\tmethod: 'post',\r\n\t\t\tdata: {\r\n\t\t\t\ttx_c3baxi_baxisuche: {\r\n\t\t\t\t\tuid: el.val()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).then(( response ) => {\r\n\r\n\t\t\tlet tmpl = $('#boxTemplate')[ 0 ].innerHTML,\r\n\t\t\t\thtml = '';\r\n\t\t\thtml = tmpl.replace(/##name##/g, response.name)\r\n\t\t\t           .replace(/##zone##/g, response.zone)\r\n\t\t\t           .replace(/##linie##/g, response.linie.join(','));\r\n\t\t\ttarget.html(html);\r\n\t\t});\r\n\r\n\t});\r\n\r\n\tjQuery('#findRoute').on('submit', function ( evt ) {\r\n\t\tevt.preventDefault();\r\n\t\tjQuery('.error', '.output').remove();\r\n\t\tlet form = this;\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: '/?tx_c3baxi_baxisuche[action]=ride&tx_c3baxi_baxisuche[controller]=Ajax&type=666',\r\n\t\t\tmethod: 'post',\r\n\t\t\tdata: {\r\n\t\t\t\ttx_c3baxi_baxisuche: {\r\n\t\t\t\t\tdoAction: 'find',\r\n\t\t\t\t\tstartStation: form[ 'tx_c3baxi_web_c3baxibaxi[start]' ].value,\r\n\t\t\t\t\tendStation: form[ 'tx_c3baxi_web_c3baxibaxi[end]' ].value,\r\n\t\t\t\t\tdate: form[ 'tx_c3baxi_web_c3baxibaxi[date]' ].value,\r\n\t\t\t\t\ttime: form[ 'tx_c3baxi_web_c3baxibaxi[time]' ].value\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).then(createRideList);\r\n\t});\r\n\r\n\tfunction createRideList( response ) {\r\n\t\tif ( !response.status ) {\r\n\t\t\tlet error = jQuery('<div class=\"error\">').text('Es ist ein Fehler aufgetreten!');\r\n\t\t\tjQuery('.output').append(error);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ( response.status === 'not_found' ) {\r\n\t\t\tlet error = jQuery('<div class=\"error\">').text('Es wurden keine Fahrten gefunden!');\r\n\t\t\tjQuery('.output').append(error);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet output = jQuery('.list', '.output'),\r\n\t\t\tdata = response.data,\r\n\t\t\tlist = response.data.routes,\r\n\t\t\ttemplate = jQuery('#ride')[ 0 ].innerHTML;\r\n\r\n\t\toutput.html( null );\r\n\r\n\t\tfor ( let r = 0; r < list.length; r++ ) {\r\n\t\t\tlet ride = template,\r\n\t\t\t\trideDate = new Date(data.date.date),\r\n\t\t\t\tdeparture = new Date(list[ r ].abfahrt.date),\r\n\t\t\t\tarrival = new Date(list[ r ].ankunft.date),\r\n\t\t\t\tdepartureStr = String(departure.getHours()).padStart(2, '0') + ':' + String(departure.getMinutes()).padStart(2, '0'),\r\n\t\t\t\tarrivalStr = String(arrival.getHours()).padStart(2, '0') + ':' + String(arrival.getMinutes()).padStart(2, '0'),\r\n\t\t\t\tbookingTimeStr = String(rideDate.getHours()).padStart(2, '0') + ':' + String(rideDate.getMinutes()).padStart(2, '0');\r\n\r\n\r\n\t\t\tride = ride.replace(/##line##/g, list[ r ].linie)\r\n\t\t\t           .replace(/##duration##/g, list[ r ].dauer)\r\n\t\t\t           .replace(/##departure##/g, departureStr)\r\n\t\t\t           .replace(/##arrival##/g, arrivalStr)\r\n\t\t\t           .replace(/##date##/g, rideDate.toLocaleDateString('de-DE') )\r\n\t\t\t           .replace(/##time##/g, bookingTimeStr);\r\n\r\n\r\n\t\t\tride = jQuery(ride);\r\n\t\t\tride.find('input[name=\"tx_c3baxi_web_c3baxibaxi[fahrt]\"]').val( list[r].uid);\r\n\t\t\tride.find('input[name=\"tx_c3baxi_web_c3baxibaxi[date]\"]').val( (rideDate.getTime() / 1000) );\r\n\t\t\tride.find('input[name=\"tx_c3baxi_web_c3baxibaxi[startStation]\"]').val( data.start);\r\n\t\t\tride.find('input[name=\"tx_c3baxi_web_c3baxibaxi[endStation]\"]').val( data.end);\r\n\r\n\t\t\toutput.append( ride );\r\n\t\t}\r\n\t}\r\n});\r\n\r\n"]}