{"version":3,"sources":["default.es6"],"names":[],"mappings":"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","file":"default.js","sourcesContent":["require([\"jquery\", \"TYPO3/CMS/Backend/Modal\"], function ($) {\r\n\r\n    function select2() {\r\n        let field = jQuery(this),\r\n            searchField = jQuery('<input type=\"text\" class=\"select2-search__field\" size=\"40\" />'),\r\n            wrap = jQuery('<span class=\"select2 form-control\">'),\r\n            id = 'list_' + field.attr('name'),\r\n            datalist = jQuery('<datalist id=\"' + id + '\">'),\r\n            reset = jQuery('<span class=\"reset\">');\r\n\r\n        searchField.attr('list', id);\r\n        field.wrap(wrap);\r\n\r\n        datalist.append(field.find('option').clone());\r\n        datalist.find('option').each(function () {\r\n            jQuery(this)\r\n                .attr('data-value', jQuery(this).attr('value'))\r\n                .attr('value', jQuery(this).text())\r\n                .text(null);\r\n        });\r\n\r\n        searchField.insertAfter(field);\r\n        reset.insertAfter(searchField);\r\n        datalist.insertAfter(field);\r\n\r\n        reset.on('click', function () {\r\n            searchField.val(null);\r\n            jQuery('option', 'select[name=\"tx_c3baxi_tools_c3baxibaxi[start]\"], datalist[id=\"list_tx_c3baxi_tools_c3baxibaxi[start]\"],select[name=\"tx_c3baxi_tools_c3baxibaxi[end]\"], datalist[id=\"list_tx_c3baxi_tools_c3baxibaxi[end]\"]').attr('disabled', false);\r\n        });\r\n\r\n        if (jQuery('option[selected]', field)) {\r\n            if (jQuery('option[selected]', field).val() !== '0') {\r\n                searchField.val(jQuery('option[selected]', field).text().toString().trim());\r\n                jQuery(field).change();\r\n            }\r\n        }\r\n\r\n        searchField.on('input change', function (evt) {\r\n            let target = jQuery(this),\r\n                options = jQuery(target[0].list).find('option').not(':disabled'),\r\n                selected = false;\r\n\r\n            for (let i = 0; i < options.length; i++) {\r\n                if (options[i].value === target.val()) {\r\n                    selected = options[i];\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (selected) {\r\n                searchField.val(selected.value);\r\n\r\n                // selected.prop('selected', true);\r\n                field.val(selected.dataset.value).change();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    function prepareFilterForm() {\r\n        jQuery('.js-filterForm').each(function () {\r\n            let form = jQuery(this),\r\n                lineList = [],\r\n                clientList = [],\r\n                listing = form.closest('.baxi_tabs-tab').find('.booking-fahrt'),\r\n                linienSelect = jQuery('select[name=\"linie\"]', form),\r\n                clientSelect = jQuery('select[name=\"client\"]', form),\r\n                bookings = form.closest('.baxi_tabs-tab').find('.booking-client,.subscriptions-item');\r\n\r\n\r\n            listing.each(function () {\r\n                let linie = jQuery(this).data('linie');\r\n                if (lineList.indexOf(linie) === -1) {\r\n                    lineList.push(linie);\r\n                }\r\n            });\r\n\r\n            for (let l = 0; l < lineList.length; l++) {\r\n                linienSelect.append(jQuery('<option value=\"' + lineList[l] + '\">' + lineList[l] + '</option>'));\r\n            }\r\n            if (bookings.length > 0)\r\n                bookings.each(function (idx, el) {\r\n                    clientList[el.dataset.clientid] = el.dataset.client;\r\n                });\r\n\r\n            // if( subscriptions.length > 0 )\r\n            //     subscriptions.each(function (idx, el) {\r\n            //         clientList[el.dataset.clientid] = el.dataset.client;\r\n            //     });\r\n\r\n            clientList.forEach(function (val, idx) {\r\n                clientSelect.append(jQuery('<option value=\"' + idx + '\">' + val + ' (' + idx + ')' + '</option>'));\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    $('[data-toggle=\"collapse\"][data-target]').on('click', (evt) => {\r\n\r\n        let target = $(evt.currentTarget).data('target');\r\n        $(evt.currentTarget).toggleClass('is-toggled');\r\n        if (target[0] === '#') {\r\n            $(target).toggle();\r\n        } else {\r\n            $(target, evt.currentTarget).toggle();\r\n        }\r\n    });\r\n\r\n    $('[data-action=\"selectStation\"]').on('change', function () {\r\n\r\n        let el = $(this),\r\n            target = $(el.data('target')),\r\n            stationId = parseInt(el.val()),\r\n            selectedZone = el.find('[value=\"' + el.val() + '\"]').data('zone'),\r\n            selectedLinien = el.find('[value=\"' + el.val() + '\"]').data('linie'),\r\n            selectName = (el.data('target') === '#start_station') ? 'end' : 'start',\r\n            options = jQuery('option', 'select[name=\"tx_c3baxi_tools_c3baxibaxi[' + selectName + ']\"], datalist[id=\"list_tx_c3baxi_tools_c3baxibaxi[' + selectName + ']\"]')\r\n                .attr('disabled', false),\r\n            isCityLine = true,\r\n            cityLines = [8319, 8320];\r\n\r\n        if (el.closest('#findCityRoute').length > 0) {\r\n            isCityLine = true;\r\n        }\r\n\r\n        options.filter(function (idx, el) {\r\n\r\n            let that = jQuery(el),\r\n                uid = (typeof that.data('value') ==='undefined' ? that.val() : that.data('value')), //( that.parentElement.tagName === 'datalist' ? that.data('value') : that.val()),\r\n                zone = that.data('zone'),\r\n                linien = that.data('linie') || [];\r\n\r\n            if (uid === 0) return false;\r\n           /** same Station */\r\n           if( stationId === uid ) {\r\n               return true;\r\n           }\r\n            if (typeof linien !== 'undefined') {\r\n\r\n\r\n                /** same zone and not a cityline */\r\n                // if (selectedZone === zone && cityLines.filter((val) => linien.includes(val)).length === 0) {\r\n                //     return true;\r\n                // }\r\n                /** durch das aukomentieren ist die gleiche Zone fuer einstieg und ausstieg erlaubt **/\r\n\r\n                /** diferent Line */\r\n                return selectedLinien.filter(function (val) {\r\n                    return linien.includes(val)\r\n                }).length === 0;\r\n            }\r\n            return false;\r\n        })\r\n            .attr('disabled', true);\r\n\r\n\r\n    });\r\n\r\n\r\n\r\n    // jQuery('#findCityRoute').on('submit', function (evt) {\r\n    //     evt.preventDefault();\r\n    //     jQuery('.error', '.output').remove();\r\n    //     jQuery('.list', '.output').html(null);\r\n    //\r\n    //     let form = this;\r\n    //     $.ajax({\r\n    //         url: '/?tx_c3baxi_baxisuche[action]=ride&tx_c3baxi_baxisuche[controller]=Ajax&type=666',\r\n    //         method: 'post',\r\n    //         data: {\r\n    //             tx_c3baxi_baxisuche: {\r\n    //                 doAction: 'findCityRoute',\r\n    //                 startStation: form['tx_c3baxi_tools_c3baxibaxi[start]'].value,\r\n    //                 endStation: form['tx_c3baxi_tools_c3baxibaxi[end]'].value,\r\n    //                 date: form['tx_c3baxi_tools_c3baxibaxi[date]'].value,\r\n    //                 time: form['tx_c3baxi_tools_c3baxibaxi[time]'].value\r\n    //             }\r\n    //         }\r\n    //     }).then(createRideList).fail(function (response) {\r\n    //         let error = jQuery('<div class=\"error\">').text('Es ist ein Fehler aufgetreten!');\r\n    //         jQuery('.output').append(error);\r\n    //     });\r\n    // });\r\n\r\n\r\n    jQuery('.reactive').on('change', '.newUserToggle', function () {\r\n        let form = jQuery(this).closest('form');\r\n        if (jQuery(this).is(':checked')) {\r\n            form.find('[name=\"tx_c3baxi_tools_c3baxibaxi[user]\"]').attr('required', false);\r\n            form.find('[name=\"tx_c3baxi_tools_c3baxibaxi[newUser][name]\"]').attr('required', true);\r\n        } else {\r\n            form.find('[name=\"tx_c3baxi_tools_c3baxibaxi[user]\"]').attr('required', true);\r\n            form.find('[name=\"tx_c3baxi_tools_c3baxibaxi[newUser][name]\"]').attr('required', false);\r\n        }\r\n        form.find('.newUser').toggle();\r\n    });\r\n\r\n    $('[pattern=\"([0-9][0-9]:[0-9][0-9])?\"]').on('keyup', function () {\r\n        jQuery(this).val(jQuery(this).val().toString().replace(/[,\\. ]/i, ':'));\r\n    });\r\n\r\n    // find geoLocation by Haltestelle\r\n    jQuery('[data-action=\"geolocate\"]').on('click', function (evt) {\r\n        evt.preventDefault();\r\n        let gMap = jQuery('#gmap'),\r\n            adresse = jQuery(this).data('target');\r\n\r\n        gMap.parent().show();\r\n        gMap.css({width: '600px', height: '400px'});\r\n\r\n        if (parseFloat(jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[longitude]\"]').val()) > 0 && parseFloat(jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[latitude]\"]').val()) > 0) {\r\n\r\n            let longitude = parseFloat(jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[longitude]\"]').val()),\r\n                latitude = parseFloat(jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[latitude]\"]').val()),\r\n                mapSettings = {\r\n                    center: {lat: latitude, lng: longitude},\r\n                    zoom: 12,\r\n                    disableDefaultUI: false,\r\n                    // gestureHandling: 'greedy'\r\n                },\r\n                map = new google.maps.Map(gMap[0], mapSettings),\r\n                marker = new google.maps.Marker({\r\n                    position: {lat: latitude, lng: longitude},\r\n                    map: map,\r\n                    draggable: true\r\n                });\r\n            google.maps.event.addListener(marker, 'dragend', function (evt) {\r\n                jQuery('[data-geo=\"latitude\"]').val(evt.latLng.lat());\r\n                jQuery('[data-geo=\"longitude\"]').val(evt.latLng.lng());\r\n            });\r\n        } else {\r\n            jQuery.ajax('https://maps.googleapis.com/maps/api/geocode/json?address=' + encodeURIComponent(adresse) + '&key=AIzaSyC0xlK753ERQJ9vXnmhKD8k3cGZ885-gJ8', {region: 'DE'}).then(function (responseRaw) {\r\n\r\n                let response = null,\r\n                    mapSettings = {\r\n                        center: {lat: 49.8790723, lng: 12.3312861},\r\n                        zoom: 12,\r\n                        disableDefaultUI: false,\r\n                        // gestureHandling: 'greedy'\r\n                    },\r\n                    map = new google.maps.Map(gMap[0], mapSettings);\r\n\r\n                if (typeof responseRaw != 'object') {\r\n                    response = JSON.parse(responseRaw);\r\n                } else {\r\n                    response = responseRaw;\r\n                }\r\n                if (response.status === 'OK') {\r\n\r\n                    let marker = new google.maps.Marker({\r\n                        position: response.results[0].geometry.location,\r\n                        map: map,\r\n                        draggable: true\r\n                    });\r\n\r\n                    map.setCenter(response.results[0].geometry.location);\r\n\r\n                    jQuery('[data-geo=\"latitude\"]').val(response.results[0].geometry.location.lat);\r\n                    jQuery('[data-geo=\"longitude\"]').val(response.results[0].geometry.location.lng);\r\n\r\n                    google.maps.event.addListener(marker, 'dragend', function (evt) {\r\n                        jQuery('[data-geo=\"latitude\"]').val(evt.latLng.lat());\r\n                        jQuery('[data-geo=\"longitude\"]').val(evt.latLng.lng());\r\n                    });\r\n\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    // Table Sorting\r\n    jQuery('[data-action=\"sort\"]', '.baxi_table').on('click', function () {\r\n        let table = jQuery(this).closest('.baxi_table'),\r\n            tbody = table.children('tbody'),\r\n            sortby = jQuery(this).data('sortby'),\r\n            direction = 1;\r\n\r\n        // if( jQuery(this).data('direction' ) != 'asc' ) {\r\n        // \tjQuery(this).data('direction', direction);\r\n        //\r\n        // }\r\n        // else{\r\n        // \tdirection = -1;\r\n        // \tjQuery(this).data('direction', direction);\r\n        //\r\n        // }\r\n\r\n        let rows = tbody.children().detach();\r\n        // tbody.html( null );\r\n\r\n        rows.sort(function (a, b) {\r\n            let aVal = jQuery(a).data(sortby),\r\n                bVal = jQuery(b).data(sortby);\r\n\r\n            if (['number', 'latitude', 'longitude'].indexOf(sortby) != -1) {\r\n                aVal = parseInt(aVal);\r\n                bVal = parseInt(bVal);\r\n\r\n                if ((aVal) == (bVal)) return 0;\r\n                return (((aVal) < (bVal) ? -1 : 1));\r\n\r\n            } else {\r\n                if (typeof aVal !== 'undefined')\r\n                    return aVal.localeCompare(bVal);\r\n                else\r\n                    return 0;\r\n            }\r\n        });\r\n\r\n        rows.appendTo(tbody);\r\n    });\r\n\r\n    jQuery('[data-action=\"search\"]').on('input', function(evt){\r\n\r\n\r\n        let val = jQuery(this).val().toString().toLowerCase(),\r\n            rows = jQuery('tbody tr','.baxi_table');\r\n\r\n        if( val.length < 3 ) {\r\n            rows.show();\r\n            return false;\r\n        }\r\n\r\n        rows.hide().filter( (idx,el) => jQuery(el).text().toString().toLowerCase().includes( val ) ).show();\r\n\r\n    });\r\n\r\n    jQuery('.js-map').on('click', function (evt) {\r\n        evt.preventDefault();\r\n\r\n        let target = evt.currentTarget.dataset.target,\r\n            gMap = jQuery('#map'),\r\n            search = jQuery('#searchField'),\r\n            btn = jQuery('#searchBtn');\r\n\r\n        gMap.parent().show();\r\n\r\n        gMap.css({width: '600px', height: '400px'});\r\n\r\n        let mapSettings = {\r\n                center: {lat: 49.8790723, lng: 12.3312861},\r\n                zoom: 12,\r\n                disableDefaultUI: false,\r\n                // gestureHandling: 'greedy'\r\n            },\r\n            map = new google.maps.Map(gMap[0], mapSettings);\r\n\r\n        btn.on('click', function () {\r\n            let adresse = search.val();\r\n\r\n            jQuery.ajax('https://maps.googleapis.com/maps/api/geocode/json?address=' + encodeURIComponent(adresse) + '&key=AIzaSyC0xlK753ERQJ9vXnmhKD8k3cGZ885-gJ8', {region: 'DE'}).then(function (responseRaw) {\r\n                let response;\r\n\r\n                if (typeof responseRaw != 'object') {\r\n                    response = JSON.parse(responseRaw);\r\n                } else {\r\n                    response = responseRaw;\r\n                }\r\n                let markers = [];\r\n\r\n                if (response.status === 'OK') {\r\n                    let marker = new google.maps.Marker({\r\n                        position: response.results[0].geometry.location,\r\n                        map: map,\r\n                        // draggable: true\r\n                    });\r\n\r\n                    map.setCenter(response.results[0].geometry.location);\r\n                    map.setZoom(16);\r\n\r\n                    let allowedStations = [];\r\n                    jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[' + target + ']\"] option[data-linie]').each(function () {\r\n                        allowedStations.push(parseInt(jQuery(this).attr('value')));\r\n                    });\r\n\r\n                    if (markers.length > 0) {\r\n                        for (let i = 0; i < markers.length; i++) {\r\n                            markers[i].setMap(null);\r\n                        }\r\n                        markers = [];\r\n                    }\r\n\r\n                    $.ajax({\r\n                        url: '/?tx_c3baxi_baxisuche[action]=nearestStation&tx_c3baxi_baxisuche[controller]=Ajax&type=666',\r\n                        method: 'post',\r\n                        data: {\r\n                            tx_c3baxi_baxisuche: {\r\n                                location: response.results[0].geometry.location\r\n                            }\r\n                        }\r\n                    }).then(function (responseRaw) {\r\n                            let response;\r\n\r\n                            if (typeof responseRaw != 'object') {\r\n                                response = JSON.parse(responseRaw);\r\n                            } else {\r\n                                response = responseRaw;\r\n                            }\r\n\r\n                            if (response.status === 'OK') {\r\n\r\n                                for (let i = 0; i < response.data.length; i++) {\r\n                                    let pos = response.data[i];\r\n\r\n                                    if (allowedStations.indexOf(pos.uid) !== -1) {\r\n                                        let mrkr = new google.maps.Marker({\r\n                                            position: {lat: pos.lat, lng: pos.lng},\r\n                                            map: map,\r\n                                            title: pos.name\r\n                                            // draggable: true\r\n                                        });\r\n                                        mrkr.location = pos.uid;\r\n                                        mrkr.addListener('click', function () {\r\n                                            console.log(pos);\r\n                                            jQuery('input[list=\"list_tx_c3baxi_tools_c3baxibaxi[' + target + ']\"]').val(pos.uid).trigger('change');\r\n                                        });\r\n\r\n                                        markers.push(mrkr);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    )\r\n\r\n                }\r\n            });\r\n        });\r\n\r\n    });\r\n\r\n    jQuery('.map-wrap .close').on('click', function () {\r\n        jQuery(this).closest('.map-wrap').hide();\r\n    });\r\n\r\n    jQuery('select.select2').each(select2);\r\n\r\n\r\n    prepareFilterForm();\r\n\r\n    jQuery('.js-filterForm').on('change', function (evt) {\r\n        let listing = jQuery(this).closest('.baxi_tabs-tab').find('.booking');\r\n\r\n        switch (evt.originalEvent.target.name) {\r\n            case 'confirmed':\r\n                if (evt.originalEvent.target.value === 'all') {\r\n                    listing.find('.booking-fahrt').show();\r\n                } else {\r\n                    listing.find('.booking-fahrt').hide();\r\n                    if (evt.originalEvent.target.value < 2) {\r\n                        listing.find('.booking-fahrt').filter('[data-confirmed=\"' + evt.originalEvent.target.value + '\"]').show();\r\n                    } else {\r\n                        listing.find('.booking-fahrt').filter('[data-confirmed=\"0\"][data-remindersend=\"1\"]').show();\r\n                    }\r\n                }\r\n\r\n                break;\r\n            case 'approved':\r\n                if (evt.originalEvent.target.value === 'all') {\r\n                    listing.find('.booking-fahrt').show();\r\n                } else {\r\n                    listing.find('.booking-fahrt').hide();\r\n                    listing.find('.booking-fahrt').filter('[data-approved=\"' + evt.originalEvent.target.value + '\"]').show();\r\n                }\r\n\r\n                break;\r\n\r\n            case 'linie':\r\n                if (evt.originalEvent.target.value === 'all') {\r\n                    listing.find('.booking-fahrt').show();\r\n                } else {\r\n                    listing.find('.booking-fahrt').hide();\r\n                    listing.find('.booking-fahrt').filter('[data-linie=\"' + evt.originalEvent.target.value + '\"]').show();\r\n                }\r\n                break;\r\n\r\n            case 'client':\r\n                if (evt.originalEvent.target.value === 'all') {\r\n                    listing.find('.booking-fahrt').show();\r\n                } else {\r\n                    listing.find('.booking-fahrt').hide();\r\n                    listing.find('.booking-client[data-clientid=\"' + evt.originalEvent.target.value + '\"]').closest('.booking-fahrt').show();\r\n                }\r\n                break;\r\n        }\r\n    });\r\n\r\n\r\n    jQuery('button[data-action=\"addException\"]').on('click', function (evt) {\r\n        let tmpl = jQuery(jQuery('#exceptionTemplate')[0].innerHTML),\r\n            exceptionList = jQuery('.exception-list');\r\n\r\n        let exception = tmpl.clone();\r\n        exception.appendTo(exceptionList);\r\n    });\r\n    jQuery('.exception-list').on('click', '[data-action=\"removeException\"]', function () {\r\n        jQuery(this).closest('.row').remove();\r\n    });\r\n\r\n    jQuery('button[data-action=\"switchStations\"]').on('click', function (evt) {\r\n        let startField = jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[start]\"]'),\r\n            endField = jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[end]\"]'),\r\n            tmpStart = startField.val(),\r\n            tmpEnd = endField.val();\r\n\r\n        startField.find('[disabled]').attr('disabled', false);\r\n        endField.find('[disabled]').attr('disabled', false);\r\n\r\n        startField.val(endField.val()).trigger('change');\r\n        jQuery('[list=\"list_tx_c3baxi_tools_c3baxibaxi[start]\"]').val(startField.find(':selected').text().toString().trim());\r\n        endField.val(tmpStart).trigger('change');\r\n        jQuery('[list=\"list_tx_c3baxi_tools_c3baxibaxi[end]\"]').val(endField.find(':selected').text().toString().trim());\r\n    });\r\n\r\n\r\n\r\n    let bookingForm = jQuery('#findRoute, #findSubscriptionRoute');\r\n    if (bookingForm.length === 1) {\r\n\r\n        function createRideList(response) {\r\n            let output = jQuery('.list', '.output');\r\n\r\n            if (!response.status) {\r\n\r\n                if (response.status_text === 'no_rides_found') {\r\n                    let error = jQuery('<div class=\"error\">').text('Es wurden keine Fahrten gefunden!');\r\n                    output.append(error);\r\n                    return false;\r\n                } else if (response.status_text === 'error') {\r\n\r\n                    let error = jQuery('<div class=\"error\">').text('Es ist ein Fehler aufgetreten!');\r\n                    output.append(error);\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            let data = response.data,\r\n                list = response.data.routes,\r\n                now = new Date(),\r\n                warning = jQuery('<span class=\"box-warning\">');\r\n\r\n            function generateList(rides, data, template, target) {\r\n\r\n                for (let r = 0; r < rides.length; r++) {\r\n                    let ride = template,\r\n                        rDate = (data.date !== false ? new Date(Date.parse(data.date)) : new Date()),\r\n                        departure = new Date(Date.parse(rides[r].abfahrt)),\r\n                        arrival = new Date(Date.parse(rides[r].ankunft)),\r\n                        buchbarBis = new Date(Date.parse(rides[r].buchbarBis)),\r\n                        departureStr = String(departure.getHours()).padStart(2, '0') + ':' + String(departure.getMinutes()).padStart(2, '0'),\r\n                        arrivalStr = String(arrival.getHours()).padStart(2, '0') + ':' + String(arrival.getMinutes()).padStart(2, '0'),\r\n                        bookingTimeStr = String(rDate.getHours()).padStart(2, '0') + ':' + String(rDate.getMinutes()).padStart(2, '0');\r\n\r\n                    ride = ride.replace(/##line##/g, rides[r].linie)\r\n                        .replace(/##fahrtName##/g, rides[r].fahrtName)\r\n                        .replace(/##ride##/g, rides[r].uid)\r\n                        .replace(/##duration##/g, rides[r].dauer)\r\n                        .replace(/##departure##/g, departureStr)\r\n                        .replace(/##arrival##/g, arrivalStr)\r\n                        .replace(/%23%23start%23%23/g, data.start)\r\n                        .replace(/%23%23end%23%23/g, data.end)\r\n                        .replace(/%23%23fahrt%23%23/g, rides[r].uid)\r\n                        .replace(/##time##/g, bookingTimeStr);\r\n\r\n                    rDate.setHours(departure.getHours());\r\n                    rDate.setMinutes(departure.getMinutes());\r\n\r\n                    ride = ride.replace(/##date##/g, rDate.toLocaleDateString('de-DE'))\r\n                        .replace(/%%date%%/g, (rDate.getTime() / 1000))\r\n                        .replace(/%23%23date%23%23/g, (rDate.getTime() / 1000));\r\n\r\n\r\n                    ride = jQuery(ride);\r\n\r\n                    /**\r\n                     * @var DateTime buchbarBis\r\n                     */\r\n                    buchbarBis.setMinutes(buchbarBis.getMinutes() + 15);\r\n\r\n                    if (now > buchbarBis && data.date !== false) {\r\n                        buchbarBis.setMinutes(buchbarBis.getMinutes() - 15);\r\n                        warning.attr('title', 'Buchbar bis: ' + String(buchbarBis.getHours()).padStart(2, '0') + ':' + String(buchbarBis.getMinutes()).padStart(2, '0'));\r\n                        ride.prepend(warning.clone());\r\n                    }\r\n\r\n                    ride.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[fahrt]\"]').val(rides[r].uid);\r\n                    ride.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[fahrt][]\"]').val(rides[r].uid);\r\n                    ride.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[date]\"]').val((rDate.getTime() / 1000));\r\n                    ride.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[startStation]\"]').val(data.start);\r\n                    ride.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[endStation]\"]').val(data.end);\r\n\r\n                    target.append(ride);\r\n                }\r\n            }\r\n\r\n            output.html(null);\r\n\r\n            if (typeof list == 'object' && typeof list.regular != 'undefined') {\r\n                let regList = jQuery('<div id=\"hinfahrt\"><div class=\"list\"></div></div>'),\r\n                    backList = jQuery('<div id=\"rueckfahrt\"><div class=\"list\"></div></div>'),\r\n                    template = jQuery('#multiRide')[0].innerHTML;\r\n\r\n                generateList(list['regular'], data, template, regList);\r\n                generateList(list['return'], data, template, backList);\r\n\r\n                regList.prepend( jQuery('<h2>Hinfahrt</h2>'));\r\n                backList.prepend( jQuery('<h2>Rueckfahrt</h2>'));\r\n\r\n                regList.find('input[type=\"radio\"][name=\"tx_c3baxi_tools_c3baxibaxi[fahrt][]\"]')\r\n                    .attr('name','tx_c3baxi_tools_c3baxibaxi[fahrt][to]');\r\n                backList.find('input[type=\"radio\"][name=\"tx_c3baxi_tools_c3baxibaxi[fahrt][]\"]')\r\n                    .attr('name','tx_c3baxi_tools_c3baxibaxi[fahrt][from]');\r\n\r\n                let form = jQuery(jQuery('#multiForm')[0].innerHTML);\r\n                form.find('#rideList').append(regList);\r\n                form.find('#rideList').append(backList);\r\n\r\n                // form.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[date]\"]').val((rideDate.getTime() / 1000));\r\n                form.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[startStation]\"]').val(data.start);\r\n                form.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[endStation]\"]').val(data.end);\r\n\r\n                // output.addClass('2col');\r\n\r\n                output.prepend(form);\r\n\r\n            } else {\r\n                let template = jQuery('#ride')[0].innerHTML;\r\n                generateList(list, data, template, output);\r\n            }\r\n            jQuery('select.select2', '.output').each(select2);\r\n        }\r\n\r\n\r\n\r\n        jQuery('#findRoute').on('submit', function (evt) {\r\n            evt.preventDefault();\r\n            jQuery('.error', '.output').remove();\r\n            jQuery('.list', '.output').html(null);\r\n\r\n            let form = this,\r\n                postData = {\r\n                    tx_c3baxi_baxisuche: {\r\n                        doAction: 'find',\r\n                        startStation: form['tx_c3baxi_tools_c3baxibaxi[start]'].value,\r\n                        endStation: form['tx_c3baxi_tools_c3baxibaxi[end]'].value,\r\n                        date: form['tx_c3baxi_tools_c3baxibaxi[date]'].value,\r\n                        time: form['tx_c3baxi_tools_c3baxibaxi[time]'].value,\r\n                        returnRide: jQuery(form).find('#returnRide').prop('checked')\r\n                    }\r\n                };\r\n\r\n            jQuery.ajax({\r\n                url: '/?tx_c3baxi_baxisuche[action]=ride&tx_c3baxi_baxisuche[controller]=Ajax&type=666',\r\n                method: 'post',\r\n                data: postData\r\n            })\r\n                .then(createRideList)\r\n                .fail(function () {\r\n                    let error = jQuery('<div class=\"error\">').text('Es ist ein Fehler aufgetreten!');\r\n                    jQuery('.output').append(error);\r\n                });\r\n        });\r\n\r\n        jQuery('button[data-action=\"findRoutes\"]', '#findSubscriptionRoute').on('click', function (evt) {\r\n            evt.preventDefault();\r\n            jQuery('.error', '.output').remove();\r\n            let form = jQuery(this).closest('form'),\r\n                days = [],\r\n                start = jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[start]\"]', form).val(),\r\n                end = jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[end]\"]', form).val();\r\n\r\n            if( typeof start === 'undefined' && jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[start][__identity]\"]').length === 1 ) {\r\n                start = jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[start][__identity]\"]').val();\r\n                end = jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[end][__identity]\"]').val();\r\n            }\r\n\r\n            jQuery('[name=\"tx_c3baxi_tools_c3baxibaxi[tage][]\"]', form).each(function () {\r\n                if (jQuery(this).prop('checked')) {\r\n                    days.push(jQuery(this).val());\r\n                }\r\n            });\r\n            $.ajax({\r\n                url: '/?tx_c3baxi_baxisuche[action]=ride&tx_c3baxi_baxisuche[controller]=Ajax&type=666',\r\n                method: 'post',\r\n                data: {\r\n                    tx_c3baxi_baxisuche: {\r\n                        doAction: 'findByDays',\r\n                        startStation: start,\r\n                        endStation: end,\r\n                        tage: days\r\n                    }\r\n                }\r\n            }).then(createRideList).fail(function (response) {\r\n                let error = jQuery('<div class=\"error\">').text('Es ist ein Fehler aufgetreten!');\r\n                jQuery('.output').append(error);\r\n            });\r\n        });\r\n\r\n    }\r\n});\r\n\r\n\r\n\r\n"]}