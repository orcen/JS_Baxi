{"version":3,"sources":["default.es6"],"names":[],"mappings":"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","file":"default.js","sourcesContent":["require([ \"jquery\" ], function ( $ ) {\r\n\r\n\t$('[data-toggle=\"collapse\"][data-target]').on('click', ( evt ) => {\r\n\r\n\t\tlet target = $(evt.currentTarget).data('target');\r\n\t\tif ( target[ 0 ] === '#' ) {\r\n\t\t\t$(target).toggle();\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(target, evt.currentTarget).toggle();\r\n\t\t}\r\n\t});\r\n\r\n\t$('[data-action=\"selectStation\"]').on('change', function () {\r\n\r\n\t\tlet el = $(this),\r\n\t\t\ttarget = $(el.data('target')),\r\n\t\t\tselectedZone = el.find('[value=\"' + el.val() + '\"]').data('zone'),\r\n\t\t\tselectName = (el.data('target') === '#start_station') ? 'end' : 'start';\r\n\r\n\t\tjQuery('option', 'select[name=\"tx_c3baxi_tools_c3baxibaxi[' + selectName + ']\"]')\r\n\t\t\t.attr('disabled', false)\r\n\t\t\t.filter('[data-zone=\"' + selectedZone + '\"]')\r\n\t\t\t.attr('disabled', true);\r\n\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: '/?tx_c3baxi_baxisuche[action]=stationDetail&tx_c3baxi_baxisuche[controller]=Ajax&type=666',\r\n\t\t\tmethod: 'post',\r\n\t\t\tdata: {\r\n\t\t\t\ttx_c3baxi_baxisuche: {\r\n\t\t\t\t\tuid: el.val()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).then(( response ) => {\r\n\r\n\t\t\tlet tmpl = $('#boxTemplate')[ 0 ].innerHTML,\r\n\t\t\t\thtml = '';\r\n\t\t\thtml = tmpl.replace(/##name##/g, response.name)\r\n\t\t\t           .replace(/##zone##/g, response.zone)\r\n\t\t\t           .replace(/##linie##/g, response.linie.join(','));\r\n\t\t\ttarget.html(html);\r\n\t\t});\r\n\r\n\t});\r\n\r\n\tjQuery('#findRoute').on('submit', function ( evt ) {\r\n\t\tevt.preventDefault();\r\n\t\tjQuery('.error', '.output').remove();\r\n\t\tlet form = this;\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: '/?tx_c3baxi_baxisuche[action]=ride&tx_c3baxi_baxisuche[controller]=Ajax&type=666',\r\n\t\t\tmethod: 'post',\r\n\t\t\tdata: {\r\n\t\t\t\ttx_c3baxi_baxisuche: {\r\n\t\t\t\t\tdoAction: 'find',\r\n\t\t\t\t\tstartStation: form[ 'tx_c3baxi_tools_c3baxibaxi[start]' ].value,\r\n\t\t\t\t\tendStation: form[ 'tx_c3baxi_tools_c3baxibaxi[end]' ].value,\r\n\t\t\t\t\tdate: form[ 'tx_c3baxi_tools_c3baxibaxi[date]' ].value,\r\n\t\t\t\t\ttime: form[ 'tx_c3baxi_tools_c3baxibaxi[time]' ].value\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).then(createRideList);\r\n\t});\r\n\r\n\tfunction createRideList( response ) {\r\n\t\tif ( !response.status ) {\r\n\t\t\tlet error = jQuery('<div class=\"error\">').text('Es ist ein Fehler aufgetreten!');\r\n\t\t\tjQuery('.output').append(error);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ( response.status === 'not_found' ) {\r\n\t\t\tlet error = jQuery('<div class=\"error\">').text('Es wurden keine Fahrten gefunden!');\r\n\t\t\tjQuery('.output').append(error);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet output = jQuery('.list', '.output'),\r\n\t\t\tdata = response.data,\r\n\t\t\tlist = response.data.routes,\r\n\t\t\ttemplate = jQuery('#ride')[ 0 ].innerHTML;\r\n\r\n\t\toutput.html( null );\r\n\r\n\t\tfor ( let r = 0; r < list.length; r++ ) {\r\n\t\t\tlet ride = template,\r\n\t\t\t\trideDate = new Date(data.date.date),\r\n\t\t\t\tdeparture = new Date(list[ r ].abfahrt.date),\r\n\t\t\t\tarrival = new Date(list[ r ].ankunft.date),\r\n\t\t\t\tdepartureStr = String(departure.getHours()).padStart(2, '0') + ':' + String(departure.getMinutes()).padStart(2, '0'),\r\n\t\t\t\tarrivalStr = String(arrival.getHours()).padStart(2, '0') + ':' + String(arrival.getMinutes()).padStart(2, '0'),\r\n\t\t\t\tbookingTimeStr = String(rideDate.getHours()).padStart(2, '0') + ':' + String(rideDate.getMinutes()).padStart(2, '0');\r\n\r\n\r\n\t\t\tride = ride.replace(/##line##/g, list[ r ].linie)\r\n\t\t\t           .replace(/##duration##/g, list[ r ].dauer)\r\n\t\t\t           .replace(/##departure##/g, departureStr)\r\n\t\t\t           .replace(/##arrival##/g, arrivalStr)\r\n\t\t\t           .replace(/##date##/g, rideDate.toLocaleDateString('de-DE') )\r\n\t\t\t           .replace(/##time##/g, bookingTimeStr);\r\n\r\n\r\n\t\t\tride = jQuery(ride);\r\n\t\t\tride.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[fahrt]\"]').val( list[r].uid);\r\n\t\t\tride.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[date]\"]').val( (rideDate.getTime() / 1000) );\r\n\t\t\tride.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[startStation]\"]').val( data.start);\r\n\t\t\tride.find('input[name=\"tx_c3baxi_tools_c3baxibaxi[endStation]\"]').val( data.end);\r\n\r\n\t\t\toutput.append( ride );\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// find geoLocation by Haltestelle\r\n\tjQuery( '[data-action=\"geolocate\"]' ).on( 'click', function( evt ){\r\n\t\tevt.preventDefault();\r\n\t\tlet gMap = jQuery('#gmap'),\r\n\t\tadresse = jQuery(this).data('target');\r\n\r\n\t\tgMap.parent().show();\r\n\t\tgMap.css({width:'600px', height:'400px'});\r\n\r\n\t\tjQuery.ajax('https://maps.googleapis.com/maps/api/geocode/json?address=' + encodeURIComponent(adresse)+ '&key=AIzaSyC0xlK753ERQJ9vXnmhKD8k3cGZ885-gJ8',{region:'DE'}).then(function(responseRaw){\r\n\r\n\t\t\tlet response = null,\r\n\t\t\t\tmapSettings = {\r\n\t\t\t\t\tcenter: {lat: 49.8790723, lng: 12.3312861},\r\n\t\t\t\t\tzoom: 12,\r\n\t\t\t\t\tdisableDefaultUI: false,\r\n\t\t\t\t\t// gestureHandling: 'greedy'\r\n\t\t\t\t},\r\n\t\t\t\tmap = new google.maps.Map(gMap[0], mapSettings );\r\n\r\n\t\t\tif( typeof responseRaw != 'object' ) {\r\n\t\t\t\tresponse = JSON.parse( responseRaw );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tresponse = responseRaw;\r\n\r\n\r\n\t\t\t}\r\n\t\t\tif( response.status === 'OK' ) {\r\n\r\n\t\t\t\tlet marker = new google.maps.Marker({\r\n\t\t\t\t\tposition : response.results[0].geometry.location,\r\n\t\t\t\t\tmap : map,\r\n\t\t\t\t\tdraggable: true\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmap.setCenter( response.results[0].geometry.location );\r\n\r\n\t\t\t\tjQuery( '[data-geo=\"latitude\"]' ).val( response.results[0].geometry.location.lat );\r\n\t\t\t\tjQuery( '[data-geo=\"longitude\"]' ).val( response.results[0].geometry.location.lng );\r\n\r\n\t\t\t\tgoogle.maps.event.addListener(marker,'dragend', function(evt){\r\n\t\t\t\t\tjQuery( '[data-geo=\"latitude\"]' ).val( evt.latLng.lat() );\r\n\t\t\t\t\tjQuery( '[data-geo=\"longitude\"]' ).val( evt.latLng.lng() );\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\r\n\r\n\t// Table Sorting\r\n\r\n\tjQuery('[data-action=\"sort\"]','.baxi_table').on( 'click', function( ) {\r\n\t\tlet table = jQuery( this ).closest('.baxi_table'),\r\n\t\t\ttbody = table.children('tbody'),\r\n\t\t\tsortby = jQuery( this ).data('sortby'),\r\n\t\t\tdirection = 1;\r\n\r\n\t\t// if( jQuery(this).data('direction' ) != 'asc' ) {\r\n\t\t// \tjQuery(this).data('direction', direction);\r\n\t\t//\r\n\t\t// }\r\n\t\t// else{\r\n\t\t// \tdirection = -1;\r\n\t\t// \tjQuery(this).data('direction', direction);\r\n\t\t//\r\n\t\t// }\r\n\r\n\t\tlet rows = tbody.children().detach();\r\n\t\t// tbody.html( null );\r\n\r\n\t\trows.sort( function(a,b){\r\n\t\t\tlet aVal = jQuery(a).data(sortby),\r\n\t\t\t\tbVal = jQuery(b).data(sortby);\r\n\r\n\t\t\tif( ['number','latitude','longitude'].indexOf(sortby) != -1 ){\r\n\t\t\t\taVal = parseInt(aVal);\r\n\t\t\t\tbVal = parseInt(bVal);\r\n\r\n\t\t\t\tif( (aVal) == (bVal) ) return 0;\r\n\t\t\t\treturn  (((aVal) < (bVal) ? -1 : 1));\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif( typeof aVal !== 'undefined' )\r\n\t\t\t\t\treturn aVal.localeCompare(bVal);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t\trows.appendTo(tbody);\r\n\t});\r\n});\r\n\r\n\r\n\r\n"]}